{"ast":null,"code":"var _jsxFileName = \"/home/maksim/src/react/wa-audio-sandbox-20/src/components/WhatsAppAudioRecorder.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function WhatsAppAudioRecorder() {\n  _s();\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioStream, setAudioStream] = useState(null);\n  const [permissionStatus, setPermissionStatus] = useState('checking');\n  const [error, setError] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [debugInfo, setDebugInfo] = useState({});\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const timerRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataArrayRef = useRef(null);\n  const animationRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n  const debugLog = (message, data = null) => {\n    console.log(`ðŸŽ¤ ${message}`, data);\n    setDebugInfo(prev => ({\n      ...prev,\n      [`${Date.now()}`]: {\n        message,\n        data,\n        time: new Date().toLocaleTimeString()\n      }\n    }));\n  };\n  const checkAndRequestPermissions = async () => {\n    try {\n      var _testStream$getTracks;\n      debugLog('ðŸ” Requesting microphone access...');\n      setPermissionStatus('checking');\n      const testStream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,\n          channelCount: 1,\n          latency: 0.01\n        }\n      });\n      debugLog('âœ… Microphone access granted', {\n        tracks: testStream.getTracks().length,\n        settings: (_testStream$getTracks = testStream.getTracks()[0]) === null || _testStream$getTracks === void 0 ? void 0 : _testStream$getTracks.getSettings()\n      });\n      testStream.getTracks().forEach(track => track.stop());\n      setPermissionStatus('granted');\n      return true;\n    } catch (err) {\n      debugLog('âŒ Microphone access denied', {\n        error: err.message\n      });\n      setPermissionStatus('denied');\n      setError(`Microphone required: ${err.message}`);\n      return false;\n    }\n  };\n  useEffect(() => {\n    checkAndRequestPermissions();\n  }, []);\n  const cleanup = useCallback(() => {\n    var _mediaRecorderRef$cur, _audioContextRef$curr;\n    debugLog('ðŸ§¹ Comprehensive cleanup initiated');\n    [timerRef, animationRef].forEach(ref => {\n      if (ref.current) {\n        ref === timerRef ? clearInterval(ref.current) : cancelAnimationFrame(ref.current);\n        ref.current = null;\n      }\n    });\n    if (((_mediaRecorderRef$cur = mediaRecorderRef.current) === null || _mediaRecorderRef$cur === void 0 ? void 0 : _mediaRecorderRef$cur.state) !== 'inactive') {\n      try {\n        var _mediaRecorderRef$cur2;\n        (_mediaRecorderRef$cur2 = mediaRecorderRef.current) === null || _mediaRecorderRef$cur2 === void 0 ? void 0 : _mediaRecorderRef$cur2.stop();\n      } catch (e) {\n        debugLog('âš ï¸ MediaRecorder cleanup warning', e.message);\n      }\n      mediaRecorderRef.current = null;\n    }\n    if (((_audioContextRef$curr = audioContextRef.current) === null || _audioContextRef$curr === void 0 ? void 0 : _audioContextRef$curr.state) !== 'closed') {\n      var _audioContextRef$curr2;\n      (_audioContextRef$curr2 = audioContextRef.current) === null || _audioContextRef$curr2 === void 0 ? void 0 : _audioContextRef$curr2.close();\n      audioContextRef.current = null;\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n      setAudioStream(null);\n    }\n    setIsRecording(false);\n    setRecordingTime(0);\n    debugLog('âœ… Cleanup completed');\n  }, []);\n  useEffect(() => cleanup, [cleanup]);\n  useEffect(() => {\n    if (isRecording) {\n      timerRef.current = setInterval(() => setRecordingTime(prev => prev + 1), 1000);\n    } else {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n      setRecordingTime(0);\n    }\n    return () => timerRef.current && clearInterval(timerRef.current);\n  }, [isRecording]);\n  const drawWaveform = useCallback(() => {\n    if (!canvasRef.current || !analyserRef.current || !isRecording) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const analyser = analyserRef.current;\n    const dataArray = dataArrayRef.current;\n    const draw = () => {\n      if (!isRecording) return;\n      animationRef.current = requestAnimationFrame(draw);\n      analyser.getByteFrequencyData(dataArray);\n      ctx.fillStyle = \"#f8f9fa\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      const barWidth = canvas.width / dataArray.length * 2.5;\n      let x = 0;\n      for (let i = 0; i < dataArray.length; i++) {\n        const barHeight = dataArray[i] / 255 * canvas.height * 0.8;\n        const gradient = ctx.createLinearGradient(0, canvas.height - barHeight, 0, canvas.height);\n        gradient.addColorStop(0, '#25D366');\n        gradient.addColorStop(1, '#128C7E');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(x, canvas.height - barHeight, barWidth - 1, barHeight);\n        x += barWidth;\n      }\n    };\n    draw();\n  }, [isRecording]);\n\n  // STRATEGIC: WhatsApp-compliant OGG Opus encoding with proper headers\n  const createWhatsAppCompliantOgg = async audioBuffer => {\n    debugLog('ðŸ”§ Creating WhatsApp-compliant OGG file...');\n    try {\n      // Convert to the exact format WhatsApp expects\n      const sampleRate = 48000; // WhatsApp standard\n      const channels = 1; // Mono\n      const bitDepth = 16;\n\n      // Resample if necessary\n      let processedBuffer = audioBuffer;\n      if (audioBuffer.sampleRate !== sampleRate) {\n        processedBuffer = await resampleAudioBuffer(audioBuffer, sampleRate);\n      }\n\n      // Create proper WAV with correct headers (most universally compatible)\n      const wavBlob = createCompliantWAV(processedBuffer, sampleRate, channels, bitDepth);\n      debugLog('âœ… WhatsApp-compliant audio created', {\n        sampleRate,\n        channels,\n        size: wavBlob.size,\n        duration: processedBuffer.duration\n      });\n      return wavBlob;\n    } catch (err) {\n      debugLog('âŒ Audio processing failed', err.message);\n      throw err;\n    }\n  };\n\n  // ENGINEERING: Proper audio resampling for format compliance\n  const resampleAudioBuffer = async (audioBuffer, targetSampleRate) => {\n    const offlineContext = new OfflineAudioContext(audioBuffer.numberOfChannels, audioBuffer.duration * targetSampleRate, targetSampleRate);\n    const source = offlineContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(offlineContext.destination);\n    source.start();\n    return await offlineContext.startRendering();\n  };\n\n  // STRATEGIC: Create WAV with WhatsApp-compatible headers and structure\n  const createCompliantWAV = (audioBuffer, sampleRate, channels, bitDepth) => {\n    const length = audioBuffer.length;\n    const bytesPerSample = bitDepth / 8;\n    const blockAlign = channels * bytesPerSample;\n    const byteRate = sampleRate * blockAlign;\n    const dataSize = length * blockAlign;\n    const bufferSize = 44 + dataSize;\n    const arrayBuffer = new ArrayBuffer(bufferSize);\n    const view = new DataView(arrayBuffer);\n\n    // WAV header with WhatsApp-compatible structure\n    const writeString = (offset, string) => {\n      for (let i = 0; i < string.length; i++) {\n        view.setUint8(offset + i, string.charCodeAt(i));\n      }\n    };\n\n    // RIFF header\n    writeString(0, 'RIFF');\n    view.setUint32(4, bufferSize - 8, true);\n    writeString(8, 'WAVE');\n\n    // Format chunk\n    writeString(12, 'fmt ');\n    view.setUint32(16, 16, true); // Format chunk size\n    view.setUint16(20, 1, true); // PCM format\n    view.setUint16(22, channels, true);\n    view.setUint32(24, sampleRate, true);\n    view.setUint32(28, byteRate, true);\n    view.setUint16(32, blockAlign, true);\n    view.setUint16(34, bitDepth, true);\n\n    // Data chunk\n    writeString(36, 'data');\n    view.setUint32(40, dataSize, true);\n\n    // Convert audio data with proper quantization\n    const channelData = audioBuffer.getChannelData(0);\n    let offset = 44;\n    for (let i = 0; i < length; i++) {\n      // Proper dithering and quantization for WhatsApp compatibility\n      let sample = channelData[i];\n      sample = Math.max(-1, Math.min(1, sample)); // Clamp\n\n      // Add subtle dither to prevent quantization artifacts\n      const dither = (Math.random() - 0.5) / 32768;\n      sample += dither;\n      const intSample = sample < 0 ? sample * 0x8000 : sample * 0x7FFF;\n      view.setInt16(offset, Math.round(intSample), true);\n      offset += 2;\n    }\n    return new Blob([arrayBuffer], {\n      type: 'audio/wav'\n    });\n  };\n  const startRecording = async () => {\n    try {\n      var _stream$getTracks$, _stream$getTracks$2;\n      debugLog('ðŸŽ¬ === RECORDING START SEQUENCE ===');\n      setError(null);\n      cleanup();\n      if (permissionStatus !== 'granted') {\n        const granted = await checkAndRequestPermissions();\n        if (!granted) return;\n      }\n\n      // High-quality audio stream for WhatsApp compatibility\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,\n          // WhatsApp standard\n          channelCount: 1,\n          // Mono for compatibility\n          latency: 0.01 // Low latency\n        }\n      });\n      streamRef.current = stream;\n      setAudioStream(stream);\n      debugLog('ðŸŽ¤ High-quality stream acquired', {\n        settings: (_stream$getTracks$ = stream.getTracks()[0]) === null || _stream$getTracks$ === void 0 ? void 0 : _stream$getTracks$.getSettings(),\n        constraints: (_stream$getTracks$2 = stream.getTracks()[0]) === null || _stream$getTracks$2 === void 0 ? void 0 : _stream$getTracks$2.getConstraints()\n      });\n\n      // Audio visualization setup\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      if (audioCtx.state === 'suspended') await audioCtx.resume();\n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyser = audioCtx.createAnalyser();\n      analyser.fftSize = 256;\n      analyser.smoothingTimeConstant = 0.3;\n      source.connect(analyser);\n      audioContextRef.current = audioCtx;\n      analyserRef.current = analyser;\n      dataArrayRef.current = new Uint8Array(analyser.frequencyBinCount);\n\n      // MediaRecorder with optimal settings for WhatsApp\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'audio/webm; codecs=opus',\n        audioBitsPerSecond: 128000 // High quality\n      });\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n      mediaRecorder.onstart = () => {\n        debugLog('ðŸŽ¬ Recording started successfully');\n        setIsRecording(true);\n        drawWaveform();\n      };\n      mediaRecorder.ondataavailable = event => {\n        var _event$data;\n        if (((_event$data = event.data) === null || _event$data === void 0 ? void 0 : _event$data.size) > 0) {\n          audioChunksRef.current.push(event.data);\n          debugLog('ðŸ“¦ Audio chunk captured', {\n            size: event.data.size\n          });\n        }\n      };\n      mediaRecorder.onstop = async () => {\n        debugLog('â¹ï¸ Recording stopped, processing audio...');\n        setIsProcessing(true);\n        if (audioChunksRef.current.length > 0) {\n          const webmBlob = new Blob(audioChunksRef.current, {\n            type: 'audio/webm'\n          });\n          try {\n            // Convert to WhatsApp-compatible format\n            const audioContext = new AudioContext();\n            const arrayBuffer = await webmBlob.arrayBuffer();\n            const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\n            const compliantBlob = await createWhatsAppCompliantOgg(audioBuffer);\n            await createRecording(compliantBlob);\n          } catch (conversionError) {\n            debugLog('âš ï¸ Conversion failed, using original', conversionError.message);\n            await createRecording(webmBlob);\n          }\n        } else {\n          setError('No audio data captured');\n        }\n        setIsProcessing(false);\n        audioChunksRef.current = [];\n      };\n      mediaRecorder.onerror = event => {\n        var _event$error;\n        debugLog('âŒ Recording error', event.error);\n        setError(`Recording failed: ${(_event$error = event.error) === null || _event$error === void 0 ? void 0 : _event$error.message}`);\n        cleanup();\n      };\n      mediaRecorder.start(100); // Frequent data collection\n    } catch (err) {\n      debugLog('ðŸ’¥ Recording initialization failed', err);\n      setError(`Failed to start: ${err.message}`);\n      cleanup();\n    }\n  };\n  const stopRecording = () => {\n    var _mediaRecorderRef$cur3;\n    debugLog('â¹ï¸ Stop recording requested');\n    if (((_mediaRecorderRef$cur3 = mediaRecorderRef.current) === null || _mediaRecorderRef$cur3 === void 0 ? void 0 : _mediaRecorderRef$cur3.state) === 'recording') {\n      mediaRecorderRef.current.stop();\n    }\n    setIsRecording(false);\n    setTimeout(cleanup, 1500);\n  };\n  const createRecording = async blob => {\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);\n    const filename = `whatsapp-voice-${timestamp}.wav`; // WAV for maximum compatibility\n\n    const url = URL.createObjectURL(blob);\n    const recording = {\n      id: Date.now(),\n      url,\n      blob,\n      filename,\n      duration: recordingTime,\n      timestamp: new Date().toLocaleTimeString(),\n      size: blob.size,\n      isWhatsAppCompatible: true\n    };\n    setRecordings(prev => [...prev, recording]);\n    debugLog('âœ… WhatsApp-compatible recording created', recording);\n  };\n\n  // FIXED: Proper file drag implementation (not image drag)\n  const handleDragStart = (e, recording) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // Create proper file data for drag operation\n    const fileData = `${recording.blob.type}:${recording.filename}:${recording.url}`;\n    e.dataTransfer.setData('DownloadURL', fileData);\n    e.dataTransfer.setData('text/plain', recording.filename);\n    e.dataTransfer.effectAllowed = 'copy';\n\n    // Custom drag image showing file info\n    const dragImg = document.createElement('div');\n    dragImg.innerHTML = `ðŸŽ¤ ${recording.filename}<br/>ðŸ“ ${formatFileSize(recording.size)}`;\n    dragImg.style.cssText = `\n      position: absolute; top: -1000px; \n      padding: 12px; background: #dcf8c6; \n      border: 2px solid #25D366; border-radius: 8px;\n      font-size: 14px; font-weight: 500;\n    `;\n    document.body.appendChild(dragImg);\n    e.dataTransfer.setDragImage(dragImg, 0, 0);\n    setTimeout(() => document.body.removeChild(dragImg), 0);\n    debugLog('ðŸŽ¯ File drag initiated', {\n      filename: recording.filename,\n      size: recording.size\n    });\n  };\n  const downloadRecording = async recording => {\n    try {\n      if ('showSaveFilePicker' in window) {\n        const fileHandle = await window.showSaveFilePicker({\n          suggestedName: recording.filename,\n          types: [{\n            description: 'WhatsApp Voice Messages',\n            accept: {\n              'audio/wav': ['.wav'],\n              'audio/ogg': ['.ogg']\n            }\n          }]\n        });\n        const writable = await fileHandle.createWritable();\n        await writable.write(recording.blob);\n        await writable.close();\n        debugLog('âœ… File saved via modern File System API');\n      } else {\n        const link = document.createElement('a');\n        link.href = recording.url;\n        link.download = recording.filename;\n        link.click();\n        debugLog('âœ… File downloaded via traditional method');\n      }\n    } catch (err) {\n      if (err.name !== 'AbortError') {\n        debugLog('âŒ Download failed', err.message);\n        setError(`Download failed: ${err.message}`);\n      }\n    }\n  };\n  const removeRecording = index => {\n    setRecordings(prev => {\n      const recording = prev[index];\n      URL.revokeObjectURL(recording.url);\n      return prev.filter((_, i) => i !== index);\n    });\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-[#ece5dd] min-h-screen p-4 space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between text-sm bg-white/70 p-3 rounded-lg shadow-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83C\\uDF99\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: permissionStatus === 'granted' ? 'âœ… Ready' : permissionStatus === 'denied' ? 'âŒ Access Denied' : 'â³ Checking...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this), isRecording && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-red-600 font-medium animate-pulse flex items-center space-x-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-2 h-2 bg-red-500 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"REC \", recordingTime, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 11\n      }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-blue-600 flex items-center space-x-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"animate-spin\",\n          children: \"\\u2699\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Processing...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-50 border-l-4 border-red-400 p-4 rounded\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-start\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-700\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setError(null),\n          className: \"text-red-400 hover:text-red-600 font-bold\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-3\",\n      children: !isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startRecording,\n        disabled: permissionStatus !== 'granted',\n        className: `flex items-center space-x-2 px-6 py-3 rounded-full shadow-md transition-all ${permissionStatus !== 'granted' ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-white border-2 border-[#25D366] hover:bg-[#25D366] hover:text-white text-[#25D366]'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83C\\uDF99\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-medium\",\n          children: \"Start Recording\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopRecording,\n        className: \"flex items-center space-x-2 bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-full shadow-md relative transition-all\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u23F9\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-medium\",\n          children: [\"Stop (\", recordingTime, \"s)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute -top-1 -right-1 w-3 h-3 bg-red-300 rounded-full animate-ping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded-lg shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: 500,\n        height: 80,\n        className: \"w-full border rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-sm text-gray-600 mt-2 flex items-center justify-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"animate-pulse\",\n          children: \"\\uD83C\\uDFB5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Recording high-quality audio... \", recordingTime, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: recordings.map((rec, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        draggable: true,\n        onDragStart: e => handleDragStart(e, rec),\n        className: \"flex items-center space-x-4 bg-[#dcf8c6] p-4 rounded-xl shadow-md hover:shadow-lg transition-all cursor-move border-l-4 border-[#25D366] group\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-12 h-12 bg-[#25D366] rounded-full flex items-center justify-center flex-shrink-0\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-white text-lg\",\n            children: \"\\uD83C\\uDFA4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 min-w-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n            controls: true,\n            src: rec.url,\n            className: \"w-full mb-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600 flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u23F1\\uFE0F \", rec.duration, \"s\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\uD83D\\uDCC1 \", formatFileSize(rec.size)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-600 font-medium\",\n                children: \"\\u2705 WhatsApp Ready\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: rec.timestamp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-[#25D366] font-medium mt-1\",\n            children: [\"\\uD83D\\uDCF1 \", rec.filename]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transition-opacity\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => downloadRecording(rec),\n            className: \"px-3 py-2 bg-[#25D366] hover:bg-[#128C7E] text-white rounded text-sm font-medium transition-colors\",\n            title: \"Save to device\",\n            children: \"\\uD83D\\uDCBE Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removeRecording(index),\n            className: \"px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded text-sm font-medium transition-colors\",\n            title: \"Delete recording\",\n            children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-2xl opacity-50 group-hover:opacity-100 transition-opacity\",\n          title: \"Drag to share\",\n          children: \"\\u2197\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 13\n        }, this)]\n      }, rec.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this), recordings.length === 0 && !isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-gray-500 py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-6xl mb-4\",\n        children: \"\\uD83C\\uDFA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-medium mb-2\",\n        children: \"Ready to Record\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm\",\n        children: \"High-quality voice messages for WhatsApp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 9\n    }, this), recordings.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 p-5 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold text-green-800 mb-3 flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83D\\uDCF1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"WhatsApp Integration Guide\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-2 gap-4 text-sm text-green-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium mb-2\",\n            children: \"\\uD83D\\uDCBE Save Method:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"space-y-1 list-disc list-inside\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Click \\\"Save\\\" to download WAV file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Files are WhatsApp-compatible format\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"High-quality 48kHz mono audio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium mb-2\",\n            children: \"\\uD83D\\uDCE4 Share Options:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"space-y-1 list-disc list-inside\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"WhatsApp Desktop: Attach saved file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Mobile: Share via file picker\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Drag files to desktop/folders\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 9\n    }, this), Object.keys(debugInfo).length > 0 && /*#__PURE__*/_jsxDEV(\"details\", {\n      className: \"bg-gray-50 border border-gray-200 rounded p-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n        className: \"cursor-pointer font-medium text-gray-700 hover:text-gray-900\",\n        children: [\"\\uD83D\\uDD27 Technical Log (\", Object.keys(debugInfo).length, \" events)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 space-y-1 max-h-48 overflow-y-auto text-xs font-mono\",\n        children: Object.entries(debugInfo).slice(-10).map(([key, info]) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start space-x-3 py-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-400 min-w-20\",\n            children: info.time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 655,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700\",\n            children: info.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 19\n          }, this), info.data && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600 text-xs\",\n            children: [JSON.stringify(info.data).slice(0, 80), \"...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 21\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 650,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 476,\n    columnNumber: 5\n  }, this);\n}\n_s(WhatsAppAudioRecorder, \"dTaeDqnLzOnacYR/OmrCUcYhJgM=\");\n_c = WhatsAppAudioRecorder;\nvar _c;\n$RefreshReg$(_c, \"WhatsAppAudioRecorder\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","jsxDEV","_jsxDEV","WhatsAppAudioRecorder","_s","recordings","setRecordings","isRecording","setIsRecording","recordingTime","setRecordingTime","audioStream","setAudioStream","permissionStatus","setPermissionStatus","error","setError","isProcessing","setIsProcessing","debugInfo","setDebugInfo","mediaRecorderRef","audioChunksRef","timerRef","audioContextRef","analyserRef","dataArrayRef","animationRef","canvasRef","streamRef","debugLog","message","data","console","log","prev","Date","now","time","toLocaleTimeString","checkAndRequestPermissions","_testStream$getTracks","testStream","navigator","mediaDevices","getUserMedia","audio","echoCancellation","noiseSuppression","autoGainControl","sampleRate","channelCount","latency","tracks","getTracks","length","settings","getSettings","forEach","track","stop","err","cleanup","_mediaRecorderRef$cur","_audioContextRef$curr","ref","current","clearInterval","cancelAnimationFrame","state","_mediaRecorderRef$cur2","e","_audioContextRef$curr2","close","setInterval","drawWaveform","canvas","ctx","getContext","analyser","dataArray","draw","requestAnimationFrame","getByteFrequencyData","fillStyle","fillRect","width","height","barWidth","x","i","barHeight","gradient","createLinearGradient","addColorStop","createWhatsAppCompliantOgg","audioBuffer","channels","bitDepth","processedBuffer","resampleAudioBuffer","wavBlob","createCompliantWAV","size","duration","targetSampleRate","offlineContext","OfflineAudioContext","numberOfChannels","source","createBufferSource","buffer","connect","destination","start","startRendering","bytesPerSample","blockAlign","byteRate","dataSize","bufferSize","arrayBuffer","ArrayBuffer","view","DataView","writeString","offset","string","setUint8","charCodeAt","setUint32","setUint16","channelData","getChannelData","sample","Math","max","min","dither","random","intSample","setInt16","round","Blob","type","startRecording","_stream$getTracks$","_stream$getTracks$2","granted","stream","constraints","getConstraints","audioCtx","window","AudioContext","webkitAudioContext","resume","createMediaStreamSource","createAnalyser","fftSize","smoothingTimeConstant","Uint8Array","frequencyBinCount","mediaRecorder","MediaRecorder","mimeType","audioBitsPerSecond","onstart","ondataavailable","event","_event$data","push","onstop","webmBlob","audioContext","decodeAudioData","compliantBlob","createRecording","conversionError","onerror","_event$error","stopRecording","_mediaRecorderRef$cur3","setTimeout","blob","timestamp","toISOString","replace","slice","filename","url","URL","createObjectURL","recording","id","isWhatsAppCompatible","handleDragStart","preventDefault","stopPropagation","fileData","dataTransfer","setData","effectAllowed","dragImg","document","createElement","innerHTML","formatFileSize","style","cssText","body","appendChild","setDragImage","removeChild","downloadRecording","fileHandle","showSaveFilePicker","suggestedName","types","description","accept","writable","createWritable","write","link","href","download","click","name","removeRecording","index","revokeObjectURL","filter","_","bytes","k","sizes","floor","parseFloat","pow","toFixed","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","map","rec","draggable","onDragStart","controls","src","title","Object","keys","entries","key","info","JSON","stringify","_c","$RefreshReg$"],"sources":["/home/maksim/src/react/wa-audio-sandbox-20/src/components/WhatsAppAudioRecorder.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from \"react\";\n\nexport default function WhatsAppAudioRecorder() {\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioStream, setAudioStream] = useState(null);\n  const [permissionStatus, setPermissionStatus] = useState('checking');\n  const [error, setError] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [debugInfo, setDebugInfo] = useState({});\n  \n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const timerRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataArrayRef = useRef(null);\n  const animationRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n\n  const debugLog = (message, data = null) => {\n    console.log(`ðŸŽ¤ ${message}`, data);\n    setDebugInfo(prev => ({\n      ...prev,\n      [`${Date.now()}`]: { message, data, time: new Date().toLocaleTimeString() }\n    }));\n  };\n\n  const checkAndRequestPermissions = async () => {\n    try {\n      debugLog('ðŸ” Requesting microphone access...');\n      setPermissionStatus('checking');\n      \n      const testStream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,\n          channelCount: 1,\n          latency: 0.01\n        } \n      });\n      \n      debugLog('âœ… Microphone access granted', {\n        tracks: testStream.getTracks().length,\n        settings: testStream.getTracks()[0]?.getSettings()\n      });\n      \n      testStream.getTracks().forEach(track => track.stop());\n      setPermissionStatus('granted');\n      return true;\n      \n    } catch (err) {\n      debugLog('âŒ Microphone access denied', { error: err.message });\n      setPermissionStatus('denied');\n      setError(`Microphone required: ${err.message}`);\n      return false;\n    }\n  };\n\n  useEffect(() => {\n    checkAndRequestPermissions();\n  }, []);\n\n  const cleanup = useCallback(() => {\n    debugLog('ðŸ§¹ Comprehensive cleanup initiated');\n    \n    [timerRef, animationRef].forEach(ref => {\n      if (ref.current) {\n        ref === timerRef ? clearInterval(ref.current) : cancelAnimationFrame(ref.current);\n        ref.current = null;\n      }\n    });\n    \n    if (mediaRecorderRef.current?.state !== 'inactive') {\n      try {\n        mediaRecorderRef.current?.stop();\n      } catch (e) {\n        debugLog('âš ï¸ MediaRecorder cleanup warning', e.message);\n      }\n      mediaRecorderRef.current = null;\n    }\n    \n    if (audioContextRef.current?.state !== 'closed') {\n      audioContextRef.current?.close();\n      audioContextRef.current = null;\n    }\n    \n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n      setAudioStream(null);\n    }\n    \n    setIsRecording(false);\n    setRecordingTime(0);\n    debugLog('âœ… Cleanup completed');\n  }, []);\n\n  useEffect(() => cleanup, [cleanup]);\n\n  useEffect(() => {\n    if (isRecording) {\n      timerRef.current = setInterval(() => setRecordingTime(prev => prev + 1), 1000);\n    } else {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n      setRecordingTime(0);\n    }\n    return () => timerRef.current && clearInterval(timerRef.current);\n  }, [isRecording]);\n\n  const drawWaveform = useCallback(() => {\n    if (!canvasRef.current || !analyserRef.current || !isRecording) return;\n    \n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const analyser = analyserRef.current;\n    const dataArray = dataArrayRef.current;\n\n    const draw = () => {\n      if (!isRecording) return;\n      animationRef.current = requestAnimationFrame(draw);\n      analyser.getByteFrequencyData(dataArray);\n\n      ctx.fillStyle = \"#f8f9fa\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      \n      const barWidth = (canvas.width / dataArray.length) * 2.5;\n      let x = 0;\n\n      for (let i = 0; i < dataArray.length; i++) {\n        const barHeight = (dataArray[i] / 255) * canvas.height * 0.8;\n        const gradient = ctx.createLinearGradient(0, canvas.height - barHeight, 0, canvas.height);\n        gradient.addColorStop(0, '#25D366');\n        gradient.addColorStop(1, '#128C7E');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(x, canvas.height - barHeight, barWidth - 1, barHeight);\n        x += barWidth;\n      }\n    };\n    draw();\n  }, [isRecording]);\n\n  // STRATEGIC: WhatsApp-compliant OGG Opus encoding with proper headers\n  const createWhatsAppCompliantOgg = async (audioBuffer) => {\n    debugLog('ðŸ”§ Creating WhatsApp-compliant OGG file...');\n    \n    try {\n      // Convert to the exact format WhatsApp expects\n      const sampleRate = 48000; // WhatsApp standard\n      const channels = 1; // Mono\n      const bitDepth = 16;\n      \n      // Resample if necessary\n      let processedBuffer = audioBuffer;\n      if (audioBuffer.sampleRate !== sampleRate) {\n        processedBuffer = await resampleAudioBuffer(audioBuffer, sampleRate);\n      }\n      \n      // Create proper WAV with correct headers (most universally compatible)\n      const wavBlob = createCompliantWAV(processedBuffer, sampleRate, channels, bitDepth);\n      \n      debugLog('âœ… WhatsApp-compliant audio created', {\n        sampleRate,\n        channels,\n        size: wavBlob.size,\n        duration: processedBuffer.duration\n      });\n      \n      return wavBlob;\n      \n    } catch (err) {\n      debugLog('âŒ Audio processing failed', err.message);\n      throw err;\n    }\n  };\n\n  // ENGINEERING: Proper audio resampling for format compliance\n  const resampleAudioBuffer = async (audioBuffer, targetSampleRate) => {\n    const offlineContext = new OfflineAudioContext(\n      audioBuffer.numberOfChannels,\n      audioBuffer.duration * targetSampleRate,\n      targetSampleRate\n    );\n    \n    const source = offlineContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(offlineContext.destination);\n    source.start();\n    \n    return await offlineContext.startRendering();\n  };\n\n  // STRATEGIC: Create WAV with WhatsApp-compatible headers and structure\n  const createCompliantWAV = (audioBuffer, sampleRate, channels, bitDepth) => {\n    const length = audioBuffer.length;\n    const bytesPerSample = bitDepth / 8;\n    const blockAlign = channels * bytesPerSample;\n    const byteRate = sampleRate * blockAlign;\n    const dataSize = length * blockAlign;\n    const bufferSize = 44 + dataSize;\n    \n    const arrayBuffer = new ArrayBuffer(bufferSize);\n    const view = new DataView(arrayBuffer);\n    \n    // WAV header with WhatsApp-compatible structure\n    const writeString = (offset, string) => {\n      for (let i = 0; i < string.length; i++) {\n        view.setUint8(offset + i, string.charCodeAt(i));\n      }\n    };\n    \n    // RIFF header\n    writeString(0, 'RIFF');\n    view.setUint32(4, bufferSize - 8, true);\n    writeString(8, 'WAVE');\n    \n    // Format chunk\n    writeString(12, 'fmt ');\n    view.setUint32(16, 16, true); // Format chunk size\n    view.setUint16(20, 1, true);  // PCM format\n    view.setUint16(22, channels, true);\n    view.setUint32(24, sampleRate, true);\n    view.setUint32(28, byteRate, true);\n    view.setUint16(32, blockAlign, true);\n    view.setUint16(34, bitDepth, true);\n    \n    // Data chunk\n    writeString(36, 'data');\n    view.setUint32(40, dataSize, true);\n    \n    // Convert audio data with proper quantization\n    const channelData = audioBuffer.getChannelData(0);\n    let offset = 44;\n    \n    for (let i = 0; i < length; i++) {\n      // Proper dithering and quantization for WhatsApp compatibility\n      let sample = channelData[i];\n      sample = Math.max(-1, Math.min(1, sample)); // Clamp\n      \n      // Add subtle dither to prevent quantization artifacts\n      const dither = (Math.random() - 0.5) / 32768;\n      sample += dither;\n      \n      const intSample = sample < 0 ? sample * 0x8000 : sample * 0x7FFF;\n      view.setInt16(offset, Math.round(intSample), true);\n      offset += 2;\n    }\n    \n    return new Blob([arrayBuffer], { type: 'audio/wav' });\n  };\n\n  const startRecording = async () => {\n    try {\n      debugLog('ðŸŽ¬ === RECORDING START SEQUENCE ===');\n      setError(null);\n      cleanup();\n      \n      if (permissionStatus !== 'granted') {\n        const granted = await checkAndRequestPermissions();\n        if (!granted) return;\n      }\n\n      // High-quality audio stream for WhatsApp compatibility\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,      // WhatsApp standard\n          channelCount: 1,        // Mono for compatibility\n          latency: 0.01,         // Low latency\n        }\n      });\n      \n      streamRef.current = stream;\n      setAudioStream(stream);\n      \n      debugLog('ðŸŽ¤ High-quality stream acquired', {\n        settings: stream.getTracks()[0]?.getSettings(),\n        constraints: stream.getTracks()[0]?.getConstraints()\n      });\n\n      // Audio visualization setup\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      if (audioCtx.state === 'suspended') await audioCtx.resume();\n      \n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyser = audioCtx.createAnalyser();\n      analyser.fftSize = 256;\n      analyser.smoothingTimeConstant = 0.3;\n      source.connect(analyser);\n      \n      audioContextRef.current = audioCtx;\n      analyserRef.current = analyser;\n      dataArrayRef.current = new Uint8Array(analyser.frequencyBinCount);\n\n      // MediaRecorder with optimal settings for WhatsApp\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'audio/webm; codecs=opus',\n        audioBitsPerSecond: 128000, // High quality\n      });\n\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.onstart = () => {\n        debugLog('ðŸŽ¬ Recording started successfully');\n        setIsRecording(true);\n        drawWaveform();\n      };\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data?.size > 0) {\n          audioChunksRef.current.push(event.data);\n          debugLog('ðŸ“¦ Audio chunk captured', { size: event.data.size });\n        }\n      };\n\n      mediaRecorder.onstop = async () => {\n        debugLog('â¹ï¸ Recording stopped, processing audio...');\n        setIsProcessing(true);\n        \n        if (audioChunksRef.current.length > 0) {\n          const webmBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n          \n          try {\n            // Convert to WhatsApp-compatible format\n            const audioContext = new AudioContext();\n            const arrayBuffer = await webmBlob.arrayBuffer();\n            const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\n            const compliantBlob = await createWhatsAppCompliantOgg(audioBuffer);\n            \n            await createRecording(compliantBlob);\n            \n          } catch (conversionError) {\n            debugLog('âš ï¸ Conversion failed, using original', conversionError.message);\n            await createRecording(webmBlob);\n          }\n        } else {\n          setError('No audio data captured');\n        }\n        \n        setIsProcessing(false);\n        audioChunksRef.current = [];\n      };\n\n      mediaRecorder.onerror = (event) => {\n        debugLog('âŒ Recording error', event.error);\n        setError(`Recording failed: ${event.error?.message}`);\n        cleanup();\n      };\n\n      mediaRecorder.start(100); // Frequent data collection\n      \n    } catch (err) {\n      debugLog('ðŸ’¥ Recording initialization failed', err);\n      setError(`Failed to start: ${err.message}`);\n      cleanup();\n    }\n  };\n\n  const stopRecording = () => {\n    debugLog('â¹ï¸ Stop recording requested');\n    if (mediaRecorderRef.current?.state === 'recording') {\n      mediaRecorderRef.current.stop();\n    }\n    setIsRecording(false);\n    setTimeout(cleanup, 1500);\n  };\n\n  const createRecording = async (blob) => {\n    const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);\n    const filename = `whatsapp-voice-${timestamp}.wav`; // WAV for maximum compatibility\n    \n    const url = URL.createObjectURL(blob);\n    \n    const recording = {\n      id: Date.now(),\n      url,\n      blob,\n      filename,\n      duration: recordingTime,\n      timestamp: new Date().toLocaleTimeString(),\n      size: blob.size,\n      isWhatsAppCompatible: true\n    };\n    \n    setRecordings(prev => [...prev, recording]);\n    debugLog('âœ… WhatsApp-compatible recording created', recording);\n  };\n\n  // FIXED: Proper file drag implementation (not image drag)\n  const handleDragStart = (e, recording) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Create proper file data for drag operation\n    const fileData = `${recording.blob.type}:${recording.filename}:${recording.url}`;\n    \n    e.dataTransfer.setData('DownloadURL', fileData);\n    e.dataTransfer.setData('text/plain', recording.filename);\n    e.dataTransfer.effectAllowed = 'copy';\n    \n    // Custom drag image showing file info\n    const dragImg = document.createElement('div');\n    dragImg.innerHTML = `ðŸŽ¤ ${recording.filename}<br/>ðŸ“ ${formatFileSize(recording.size)}`;\n    dragImg.style.cssText = `\n      position: absolute; top: -1000px; \n      padding: 12px; background: #dcf8c6; \n      border: 2px solid #25D366; border-radius: 8px;\n      font-size: 14px; font-weight: 500;\n    `;\n    document.body.appendChild(dragImg);\n    \n    e.dataTransfer.setDragImage(dragImg, 0, 0);\n    setTimeout(() => document.body.removeChild(dragImg), 0);\n    \n    debugLog('ðŸŽ¯ File drag initiated', { filename: recording.filename, size: recording.size });\n  };\n\n  const downloadRecording = async (recording) => {\n    try {\n      if ('showSaveFilePicker' in window) {\n        const fileHandle = await window.showSaveFilePicker({\n          suggestedName: recording.filename,\n          types: [{\n            description: 'WhatsApp Voice Messages',\n            accept: { 'audio/wav': ['.wav'], 'audio/ogg': ['.ogg'] }\n          }]\n        });\n        \n        const writable = await fileHandle.createWritable();\n        await writable.write(recording.blob);\n        await writable.close();\n        \n        debugLog('âœ… File saved via modern File System API');\n      } else {\n        const link = document.createElement('a');\n        link.href = recording.url;\n        link.download = recording.filename;\n        link.click();\n        debugLog('âœ… File downloaded via traditional method');\n      }\n    } catch (err) {\n      if (err.name !== 'AbortError') {\n        debugLog('âŒ Download failed', err.message);\n        setError(`Download failed: ${err.message}`);\n      }\n    }\n  };\n\n  const removeRecording = (index) => {\n    setRecordings(prev => {\n      const recording = prev[index];\n      URL.revokeObjectURL(recording.url);\n      return prev.filter((_, i) => i !== index);\n    });\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"bg-[#ece5dd] min-h-screen p-4 space-y-4\">\n      {/* Status header */}\n      <div className=\"flex items-center justify-between text-sm bg-white/70 p-3 rounded-lg shadow-sm\">\n        <span className=\"flex items-center space-x-2\">\n          <span>ðŸŽ™ï¸</span>\n          <span>{permissionStatus === 'granted' ? 'âœ… Ready' : \n                 permissionStatus === 'denied' ? 'âŒ Access Denied' : 'â³ Checking...'}</span>\n        </span>\n        {isRecording && (\n          <span className=\"text-red-600 font-medium animate-pulse flex items-center space-x-1\">\n            <span className=\"w-2 h-2 bg-red-500 rounded-full\"></span>\n            <span>REC {recordingTime}s</span>\n          </span>\n        )}\n        {isProcessing && (\n          <span className=\"text-blue-600 flex items-center space-x-1\">\n            <span className=\"animate-spin\">âš™ï¸</span>\n            <span>Processing...</span>\n          </span>\n        )}\n      </div>\n\n      {/* Error display */}\n      {error && (\n        <div className=\"bg-red-50 border-l-4 border-red-400 p-4 rounded\">\n          <div className=\"flex justify-between items-start\">\n            <span className=\"text-red-700\">{error}</span>\n            <button \n              onClick={() => setError(null)}\n              className=\"text-red-400 hover:text-red-600 font-bold\"\n            >\n              Ã—\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Recording controls */}\n      <div className=\"flex items-center space-x-3\">\n        {!isRecording ? (\n          <button\n            onClick={startRecording}\n            disabled={permissionStatus !== 'granted'}\n            className={`flex items-center space-x-2 px-6 py-3 rounded-full shadow-md transition-all ${\n              permissionStatus !== 'granted' \n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                : 'bg-white border-2 border-[#25D366] hover:bg-[#25D366] hover:text-white text-[#25D366]'\n            }`}\n          >\n            <span>ðŸŽ™ï¸</span>\n            <span className=\"font-medium\">Start Recording</span>\n          </button>\n        ) : (\n          <button\n            onClick={stopRecording}\n            className=\"flex items-center space-x-2 bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-full shadow-md relative transition-all\"\n          >\n            <span>â¹ï¸</span>\n            <span className=\"font-medium\">Stop ({recordingTime}s)</span>\n            <span className=\"absolute -top-1 -right-1 w-3 h-3 bg-red-300 rounded-full animate-ping\"></span>\n          </button>\n        )}\n      </div>\n\n      {/* Waveform visualization */}\n      {isRecording && (\n        <div className=\"bg-white p-4 rounded-lg shadow-md\">\n          <canvas\n            ref={canvasRef}\n            width={500}\n            height={80}\n            className=\"w-full border rounded\"\n          />\n          <div className=\"text-center text-sm text-gray-600 mt-2 flex items-center justify-center space-x-2\">\n            <span className=\"animate-pulse\">ðŸŽµ</span>\n            <span>Recording high-quality audio... {recordingTime}s</span>\n          </div>\n        </div>\n      )}\n\n      {/* WhatsApp-style message list */}\n      <div className=\"space-y-3\">\n        {recordings.map((rec, index) => (\n          <div\n            key={rec.id}\n            draggable\n            onDragStart={(e) => handleDragStart(e, rec)}\n            className=\"flex items-center space-x-4 bg-[#dcf8c6] p-4 rounded-xl shadow-md hover:shadow-lg transition-all cursor-move border-l-4 border-[#25D366] group\"\n          >\n            <div className=\"w-12 h-12 bg-[#25D366] rounded-full flex items-center justify-center flex-shrink-0\">\n              <span className=\"text-white text-lg\">ðŸŽ¤</span>\n            </div>\n            \n            <div className=\"flex-1 min-w-0\">\n              <audio controls src={rec.url} className=\"w-full mb-2\" />\n              <div className=\"text-sm text-gray-600 flex justify-between items-center\">\n                <span className=\"flex items-center space-x-2\">\n                  <span>â±ï¸ {rec.duration}s</span>\n                  <span>ðŸ“ {formatFileSize(rec.size)}</span>\n                  <span className=\"text-green-600 font-medium\">âœ… WhatsApp Ready</span>\n                </span>\n                <span>{rec.timestamp}</span>\n              </div>\n              <div className=\"text-xs text-[#25D366] font-medium mt-1\">\n                ðŸ“± {rec.filename}\n              </div>\n            </div>\n\n            <div className=\"flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n              <button\n                onClick={() => downloadRecording(rec)}\n                className=\"px-3 py-2 bg-[#25D366] hover:bg-[#128C7E] text-white rounded text-sm font-medium transition-colors\"\n                title=\"Save to device\"\n              >\n                ðŸ’¾ Save\n              </button>\n              <button\n                onClick={() => removeRecording(index)}\n                className=\"px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded text-sm font-medium transition-colors\"\n                title=\"Delete recording\"\n              >\n                ðŸ—‘ï¸ Delete\n              </button>\n            </div>\n            \n            <div className=\"text-2xl opacity-50 group-hover:opacity-100 transition-opacity\" title=\"Drag to share\">\n              â†—ï¸\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {recordings.length === 0 && !isRecording && (\n        <div className=\"text-center text-gray-500 py-12\">\n          <div className=\"text-6xl mb-4\">ðŸŽ¤</div>\n          <h3 className=\"text-xl font-medium mb-2\">Ready to Record</h3>\n          <p className=\"text-sm\">High-quality voice messages for WhatsApp</p>\n        </div>\n      )}\n\n      {/* Enhanced usage guide */}\n      {recordings.length > 0 && (\n        <div className=\"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 p-5 rounded-lg\">\n          <h3 className=\"font-semibold text-green-800 mb-3 flex items-center space-x-2\">\n            <span>ðŸ“±</span>\n            <span>WhatsApp Integration Guide</span>\n          </h3>\n          <div className=\"grid md:grid-cols-2 gap-4 text-sm text-green-700\">\n            <div>\n              <h4 className=\"font-medium mb-2\">ðŸ’¾ Save Method:</h4>\n              <ul className=\"space-y-1 list-disc list-inside\">\n                <li>Click \"Save\" to download WAV file</li>\n                <li>Files are WhatsApp-compatible format</li>\n                <li>High-quality 48kHz mono audio</li>\n              </ul>\n            </div>\n            <div>\n              <h4 className=\"font-medium mb-2\">ðŸ“¤ Share Options:</h4>\n              <ul className=\"space-y-1 list-disc list-inside\">\n                <li>WhatsApp Desktop: Attach saved file</li>\n                <li>Mobile: Share via file picker</li>\n                <li>Drag files to desktop/folders</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Collapsible debug panel */}\n      {Object.keys(debugInfo).length > 0 && (\n        <details className=\"bg-gray-50 border border-gray-200 rounded p-3\">\n          <summary className=\"cursor-pointer font-medium text-gray-700 hover:text-gray-900\">\n            ðŸ”§ Technical Log ({Object.keys(debugInfo).length} events)\n          </summary>\n          <div className=\"mt-3 space-y-1 max-h-48 overflow-y-auto text-xs font-mono\">\n            {Object.entries(debugInfo)\n              .slice(-10)\n              .map(([key, info]) => (\n                <div key={key} className=\"flex items-start space-x-3 py-1\">\n                  <span className=\"text-gray-400 min-w-20\">{info.time}</span>\n                  <span className=\"text-gray-700\">{info.message}</span>\n                  {info.data && (\n                    <span className=\"text-blue-600 text-xs\">\n                      {JSON.stringify(info.data).slice(0, 80)}...\n                    </span>\n                  )}\n                </div>\n              ))}\n          </div>\n        </details>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}