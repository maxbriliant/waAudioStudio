{"ast":null,"code":"var _jsxFileName = \"/home/maksim/src/react/wa-audio-sandbox-20/src/components/WhatsAppAudioRecorder.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function WhatsAppAudioRecorder() {\n  _s();\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioStream, setAudioStream] = useState(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const timerRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataArrayRef = useRef(null);\n  const animationRef = useRef(null);\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    return () => {\n      clearInterval(timerRef.current);\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n        audioContextRef.current = null;\n      }\n      cancelAnimationFrame(animationRef.current);\n      if (audioStream) {\n        audioStream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (isRecording) {\n      timerRef.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n    } else {\n      clearInterval(timerRef.current);\n      setRecordingTime(0);\n    }\n  }, [isRecording]);\n  const drawWaveform = () => {\n    if (!canvasRef.current || !analyserRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const analyser = analyserRef.current;\n    const dataArray = dataArrayRef.current;\n    const draw = () => {\n      animationRef.current = requestAnimationFrame(draw);\n      analyser.getByteTimeDomainData(dataArray);\n      ctx.fillStyle = \"#fff\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = \"#25D366\";\n      ctx.beginPath();\n      const sliceWidth = canvas.width * 1.0 / dataArray.length;\n      let x = 0;\n      for (let i = 0; i < dataArray.length; i++) {\n        const v = dataArray[i] / 128.0;\n        const y = v * canvas.height / 2;\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n        x += sliceWidth;\n      }\n      ctx.lineTo(canvas.width, canvas.height / 2);\n      ctx.stroke();\n    };\n    draw();\n  };\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      if (!stream) throw new Error(\"No stream available\");\n      setAudioStream(stream);\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: \"audio/ogg; codecs=opus\",\n        audioBitsPerSecond: 192000\n      });\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n      mediaRecorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n      mediaRecorder.onstop = () => {\n        const blob = new Blob(audioChunksRef.current, {\n          type: \"audio/ogg; codecs=opus\"\n        });\n        const url = URL.createObjectURL(blob);\n        setRecordings(prev => [...prev, {\n          url,\n          blob,\n          duration: recordingTime\n        }]);\n        audioChunksRef.current = [];\n        cancelAnimationFrame(animationRef.current);\n        if (audioContextRef.current) {\n          audioContextRef.current.close();\n          audioContextRef.current = null;\n        }\n      };\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyser = audioCtx.createAnalyser();\n      source.connect(analyser);\n      analyser.fftSize = 2048;\n      const bufferLength = analyser.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n      audioContextRef.current = audioCtx;\n      analyserRef.current = analyser;\n      dataArrayRef.current = dataArray;\n      drawWaveform();\n      mediaRecorder.start();\n      setIsRecording(true);\n    } catch (err) {\n      console.error(\"Recording error:\", err);\n      alert(\"Could not start recording. Check microphone permissions.\");\n    }\n  };\n  const stopRecording = () => {\n    try {\n      var _mediaRecorderRef$cur;\n      (_mediaRecorderRef$cur = mediaRecorderRef.current) === null || _mediaRecorderRef$cur === void 0 ? void 0 : _mediaRecorderRef$cur.stop();\n    } catch (e) {\n      console.warn(\"Tried to stop recorder that wasn't started.\");\n    }\n    setIsRecording(false);\n    if (audioStream) {\n      audioStream.getTracks().forEach(track => track.stop());\n    }\n  };\n  const copyToClipboard = async blob => {\n    try {\n      const file = new File([blob], \"voice.ogg\", {\n        type: \"audio/ogg; codecs=opus\"\n      });\n      const item = new ClipboardItem({\n        [file.type]: file\n      });\n      await navigator.clipboard.write([item]);\n      alert(\"Audio copied to clipboard!\");\n    } catch (err) {\n      console.error(\"Clipboard write failed:\", err);\n      alert(\"Copy failed: \" + err.message);\n    }\n  };\n  const saveRecording = blob => {\n    const a = document.createElement(\"a\");\n    a.href = URL.createObjectURL(blob);\n    a.download = `recording_${Date.now()}.ogg`;\n    a.click();\n  };\n  const removeRecording = index => {\n    setRecordings(prev => prev.filter((_, i) => i !== index));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-[#ece5dd] min-h-screen p-4 space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2\",\n      children: !isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startRecording,\n        className: \"bg-white border border-gray-300 hover:bg-gray-100 text-black px-4 py-2 rounded-full shadow-md relative\",\n        title: \"Start recording\",\n        children: \"\\uD83C\\uDF99\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopRecording,\n        className: \"bg-white border border-gray-300 hover:bg-gray-100 text-black px-4 py-2 rounded-full shadow-md relative\",\n        title: \"Stop recording\",\n        children: [\"\\u23F9\\uFE0F \", recordingTime, \"s\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute -top-3 right-0 w-3 h-3 bg-red-500 rounded-full animate-ping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), isRecording && /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: 300,\n      height: 60,\n      className: \"bg-white border rounded shadow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: recordings.map((rec, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3 bg-[#dcf8c6] p-3 rounded-xl shadow-md w-fit max-w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://www.gravatar.com/avatar?d=mp\",\n          alt: \"Avatar\",\n          className: \"w-10 h-10 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n            controls: true,\n            src: rec.url,\n            className: \"w-60\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-500\",\n            children: [rec.duration, \"s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => copyToClipboard(rec.blob),\n          className: \"text-green-700 hover:text-green-900\",\n          title: \"Copy to clipboard\",\n          children: \"\\uD83D\\uDCCB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => saveRecording(rec.blob),\n          className: \"text-blue-700 hover:text-blue-900\",\n          title: \"Download recording\",\n          children: \"\\uD83D\\uDCBE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeRecording(index),\n          className: \"text-red-700 hover:text-red-900\",\n          title: \"Delete recording\",\n          children: \"\\uD83D\\uDDD1\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 5\n  }, this);\n}\n_s(WhatsAppAudioRecorder, \"Fqk+9LNC6FGM1pyOBt4NWsLohuk=\");\n_c = WhatsAppAudioRecorder;\nvar _c;\n$RefreshReg$(_c, \"WhatsAppAudioRecorder\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","WhatsAppAudioRecorder","_s","recordings","setRecordings","isRecording","setIsRecording","recordingTime","setRecordingTime","audioStream","setAudioStream","mediaRecorderRef","audioChunksRef","timerRef","audioContextRef","analyserRef","dataArrayRef","animationRef","canvasRef","clearInterval","current","close","cancelAnimationFrame","getTracks","forEach","track","stop","setInterval","prev","drawWaveform","canvas","ctx","getContext","analyser","dataArray","draw","requestAnimationFrame","getByteTimeDomainData","fillStyle","fillRect","width","height","lineWidth","strokeStyle","beginPath","sliceWidth","length","x","i","v","y","moveTo","lineTo","stroke","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","Error","mediaRecorder","MediaRecorder","mimeType","audioBitsPerSecond","ondataavailable","event","data","size","push","onstop","blob","Blob","type","url","URL","createObjectURL","duration","audioCtx","window","AudioContext","webkitAudioContext","source","createMediaStreamSource","createAnalyser","connect","fftSize","bufferLength","frequencyBinCount","Uint8Array","start","err","console","error","alert","stopRecording","_mediaRecorderRef$cur","e","warn","copyToClipboard","file","File","item","ClipboardItem","clipboard","write","message","saveRecording","a","document","createElement","href","download","Date","now","click","removeRecording","index","filter","_","className","children","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","ref","map","rec","src","alt","controls","_c","$RefreshReg$"],"sources":["/home/maksim/src/react/wa-audio-sandbox-20/src/components/WhatsAppAudioRecorder.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\n\nexport default function WhatsAppAudioRecorder() {\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioStream, setAudioStream] = useState(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const timerRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataArrayRef = useRef(null);\n  const animationRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    return () => {\n      clearInterval(timerRef.current);\n      if (audioContextRef.current) {\n        audioContextRef.current.close();\n        audioContextRef.current = null;\n      }\n      cancelAnimationFrame(animationRef.current);\n      if (audioStream) {\n        audioStream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (isRecording) {\n      timerRef.current = setInterval(() => {\n        setRecordingTime((prev) => prev + 1);\n      }, 1000);\n    } else {\n      clearInterval(timerRef.current);\n      setRecordingTime(0);\n    }\n  }, [isRecording]);\n\n  const drawWaveform = () => {\n    if (!canvasRef.current || !analyserRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const analyser = analyserRef.current;\n    const dataArray = dataArrayRef.current;\n\n    const draw = () => {\n      animationRef.current = requestAnimationFrame(draw);\n      analyser.getByteTimeDomainData(dataArray);\n\n      ctx.fillStyle = \"#fff\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = \"#25D366\";\n      ctx.beginPath();\n\n      const sliceWidth = (canvas.width * 1.0) / dataArray.length;\n      let x = 0;\n\n      for (let i = 0; i < dataArray.length; i++) {\n        const v = dataArray[i] / 128.0;\n        const y = (v * canvas.height) / 2;\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n\n        x += sliceWidth;\n      }\n      ctx.lineTo(canvas.width, canvas.height / 2);\n      ctx.stroke();\n    };\n    draw();\n  };\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      if (!stream) throw new Error(\"No stream available\");\n\n      setAudioStream(stream);\n\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: \"audio/ogg; codecs=opus\",\n        audioBitsPerSecond: 192000,\n      });\n\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n\n      mediaRecorder.onstop = () => {\n        const blob = new Blob(audioChunksRef.current, { type: \"audio/ogg; codecs=opus\" });\n        const url = URL.createObjectURL(blob);\n        setRecordings((prev) => [...prev, { url, blob, duration: recordingTime }]);\n\n        audioChunksRef.current = [];\n        cancelAnimationFrame(animationRef.current);\n        if (audioContextRef.current) {\n          audioContextRef.current.close();\n          audioContextRef.current = null;\n        }\n      };\n\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyser = audioCtx.createAnalyser();\n      source.connect(analyser);\n      analyser.fftSize = 2048;\n      const bufferLength = analyser.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n\n      audioContextRef.current = audioCtx;\n      analyserRef.current = analyser;\n      dataArrayRef.current = dataArray;\n\n      drawWaveform();\n      mediaRecorder.start();\n      setIsRecording(true);\n\n    } catch (err) {\n      console.error(\"Recording error:\", err);\n      alert(\"Could not start recording. Check microphone permissions.\");\n    }\n  };\n\n  const stopRecording = () => {\n    try {\n      mediaRecorderRef.current?.stop();\n    } catch (e) {\n      console.warn(\"Tried to stop recorder that wasn't started.\");\n    }\n    setIsRecording(false);\n    if (audioStream) {\n      audioStream.getTracks().forEach((track) => track.stop());\n    }\n  };\n\n  const copyToClipboard = async (blob) => {\n    try {\n      const file = new File([blob], \"voice.ogg\", { type: \"audio/ogg; codecs=opus\" });\n      const item = new ClipboardItem({ [file.type]: file });\n      await navigator.clipboard.write([item]);\n      alert(\"Audio copied to clipboard!\");\n    } catch (err) {\n      console.error(\"Clipboard write failed:\", err);\n      alert(\"Copy failed: \" + err.message);\n    }\n  };\n\n  const saveRecording = (blob) => {\n    const a = document.createElement(\"a\");\n    a.href = URL.createObjectURL(blob);\n    a.download = `recording_${Date.now()}.ogg`;\n    a.click();\n  };\n\n  const removeRecording = (index) => {\n    setRecordings((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  return (\n    <div className=\"bg-[#ece5dd] min-h-screen p-4 space-y-4\">\n      <div className=\"flex items-center space-x-2\">\n        {!isRecording ? (\n          <button\n            onClick={startRecording}\n            className=\"bg-white border border-gray-300 hover:bg-gray-100 text-black px-4 py-2 rounded-full shadow-md relative\"\n            title=\"Start recording\"\n          >\n            🎙️\n          </button>\n        ) : (\n          <button\n            onClick={stopRecording}\n            className=\"bg-white border border-gray-300 hover:bg-gray-100 text-black px-4 py-2 rounded-full shadow-md relative\"\n            title=\"Stop recording\"\n          >\n            ⏹️ {recordingTime}s\n            <span className=\"absolute -top-3 right-0 w-3 h-3 bg-red-500 rounded-full animate-ping\" />\n          </button>\n        )}\n      </div>\n\n      {isRecording && (\n        <canvas\n          ref={canvasRef}\n          width={300}\n          height={60}\n          className=\"bg-white border rounded shadow\"\n        />\n      )}\n\n      <div className=\"space-y-3\">\n        {recordings.map((rec, index) => (\n          <div\n            key={index}\n            className=\"flex items-center space-x-3 bg-[#dcf8c6] p-3 rounded-xl shadow-md w-fit max-w-full\"\n          >\n            <img\n              src=\"https://www.gravatar.com/avatar?d=mp\"\n              alt=\"Avatar\"\n              className=\"w-10 h-10 rounded-full\"\n            />\n            <div className=\"flex flex-col\">\n              <audio controls src={rec.url} className=\"w-60\" />\n              <span className=\"text-xs text-gray-500\">{rec.duration}s</span>\n            </div>\n            <button\n              onClick={() => copyToClipboard(rec.blob)}\n              className=\"text-green-700 hover:text-green-900\"\n              title=\"Copy to clipboard\"\n            >\n              📋\n            </button>\n            <button\n              onClick={() => saveRecording(rec.blob)}\n              className=\"text-blue-700 hover:text-blue-900\"\n              title=\"Download recording\"\n            >\n              💾\n            </button>\n            <button\n              onClick={() => removeRecording(index)}\n              className=\"text-red-700 hover:text-red-900\"\n              title=\"Delete recording\"\n            >\n              🗑️\n            </button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}