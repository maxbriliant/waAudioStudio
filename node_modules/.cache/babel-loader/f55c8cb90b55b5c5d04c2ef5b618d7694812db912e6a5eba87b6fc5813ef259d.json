{"ast":null,"code":"var _jsxFileName = \"/home/maksim/src/react/wa-audio-sandbox-20/src/components/WhatsAppAudioRecorder.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function WhatsAppAudioRecorder() {\n  _s();\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioStream, setAudioStream] = useState(null);\n  const [permissionStatus, setPermissionStatus] = useState('prompt');\n  const [error, setError] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const timerRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataArrayRef = useRef(null);\n  const animationRef = useRef(null);\n  const canvasRef = useRef(null);\n  const recordingStartTimeRef = useRef(null);\n\n  // Check and request microphone permissions\n  const requestPermissions = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,\n          // WhatsApp compatible\n          channelCount: 1 // Mono for smaller files\n        }\n      });\n      setPermissionStatus('granted');\n\n      // Stop the test stream immediately\n      stream.getTracks().forEach(track => track.stop());\n      return true;\n    } catch (err) {\n      console.error('Permission error:', err);\n      setPermissionStatus('denied');\n      setError(`Microphone access denied: ${err.message}`);\n      return false;\n    }\n  };\n  useEffect(() => {\n    requestPermissions();\n  }, []);\n\n  // Cleanup function\n  const cleanup = useCallback(() => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n      animationRef.current = null;\n    }\n    if (audioContextRef.current && audioContextRef.current.state !== 'closed') {\n      audioContextRef.current.close();\n      audioContextRef.current = null;\n    }\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {\n      try {\n        mediaRecorderRef.current.stop();\n      } catch (e) {\n        console.warn('MediaRecorder cleanup warning:', e);\n      }\n    }\n    if (audioStream) {\n      audioStream.getTracks().forEach(track => track.stop());\n      setAudioStream(null);\n    }\n    setIsRecording(false);\n    setRecordingTime(0);\n  }, [audioStream]);\n  useEffect(() => {\n    return cleanup;\n  }, [cleanup]);\n\n  // Timer for recording duration\n  useEffect(() => {\n    if (isRecording) {\n      recordingStartTimeRef.current = Date.now();\n      timerRef.current = setInterval(() => {\n        const elapsed = Math.floor((Date.now() - recordingStartTimeRef.current) / 1000);\n        setRecordingTime(elapsed);\n      }, 100);\n    } else {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    }\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [isRecording]);\n\n  // Waveform visualization\n  const drawWaveform = useCallback(() => {\n    if (!canvasRef.current || !analyserRef.current || !isRecording) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const analyser = analyserRef.current;\n    const dataArray = dataArrayRef.current;\n    const draw = () => {\n      if (!isRecording) return;\n      animationRef.current = requestAnimationFrame(draw);\n      analyser.getByteFrequencyData(dataArray);\n      ctx.fillStyle = \"#f0f0f0\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      const barWidth = canvas.width / dataArray.length * 2.5;\n      let barHeight;\n      let x = 0;\n      for (let i = 0; i < dataArray.length; i++) {\n        barHeight = dataArray[i] / 255 * canvas.height * 0.8;\n        const gradient = ctx.createLinearGradient(0, canvas.height - barHeight, 0, canvas.height);\n        gradient.addColorStop(0, '#25D366');\n        gradient.addColorStop(1, '#128C7E');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);\n        x += barWidth + 1;\n      }\n    };\n    draw();\n  }, [isRecording]);\n\n  // Create WhatsApp-compatible audio file\n  const createWhatsAppAudio = async (audioBlob, duration) => {\n    try {\n      setIsProcessing(true);\n\n      // Create filename with timestamp\n      const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);\n      const filename = `voice-${timestamp}.ogg`;\n\n      // Create file object\n      const file = new File([audioBlob], filename, {\n        type: 'audio/ogg; codecs=opus',\n        lastModified: Date.now()\n      });\n\n      // Create object URL for preview\n      const url = URL.createObjectURL(audioBlob);\n\n      // Auto-download for drag & drop usage\n      const downloadLink = document.createElement('a');\n      downloadLink.href = url;\n      downloadLink.download = filename;\n      downloadLink.style.display = 'none';\n      document.body.appendChild(downloadLink);\n      const recording = {\n        id: Date.now(),\n        url,\n        blob: audioBlob,\n        file,\n        filename,\n        duration,\n        timestamp: new Date().toLocaleTimeString(),\n        size: audioBlob.size,\n        downloadLink\n      };\n      setRecordings(prev => [...prev, recording]);\n      setIsProcessing(false);\n      return recording;\n    } catch (err) {\n      console.error('Audio processing error:', err);\n      setError('Failed to process audio: ' + err.message);\n      setIsProcessing(false);\n      return null;\n    }\n  };\n  const startRecording = async () => {\n    try {\n      setError(null);\n      cleanup();\n      if (permissionStatus !== 'granted') {\n        const granted = await requestPermissions();\n        if (!granted) return;\n      }\n\n      // Get fresh audio stream with optimal settings for WhatsApp\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,\n          channelCount: 1\n        }\n      });\n      setAudioStream(stream);\n\n      // Setup audio context for visualization\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      await audioCtx.resume(); // Ensure audio context is running\n\n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyser = audioCtx.createAnalyser();\n      analyser.fftSize = 256;\n      analyser.smoothingTimeConstant = 0.8;\n      source.connect(analyser);\n      const bufferLength = analyser.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n      audioContextRef.current = audioCtx;\n      analyserRef.current = analyser;\n      dataArrayRef.current = dataArray;\n\n      // Setup MediaRecorder with WhatsApp-compatible format\n      const mimeTypes = ['audio/ogg; codecs=opus', 'audio/webm; codecs=opus', 'audio/ogg', 'audio/webm'];\n      let selectedMimeType = null;\n      for (const mimeType of mimeTypes) {\n        if (MediaRecorder.isTypeSupported(mimeType)) {\n          selectedMimeType = mimeType;\n          break;\n        }\n      }\n      if (!selectedMimeType) {\n        throw new Error('No supported audio format found');\n      }\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: selectedMimeType,\n        audioBitsPerSecond: 64000 // Good quality, WhatsApp compatible\n      });\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n      mediaRecorder.ondataavailable = event => {\n        if (event.data && event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n          console.log('Data chunk received:', event.data.size, 'bytes');\n        }\n      };\n      mediaRecorder.onstop = async () => {\n        console.log('MediaRecorder stopped, chunks:', audioChunksRef.current.length);\n        if (audioChunksRef.current.length > 0) {\n          const finalBlob = new Blob(audioChunksRef.current, {\n            type: selectedMimeType\n          });\n          console.log('Final blob size:', finalBlob.size, 'bytes');\n          if (finalBlob.size > 0) {\n            const actualDuration = recordingTime > 0 ? recordingTime : 1;\n            await createWhatsAppAudio(finalBlob, actualDuration);\n          } else {\n            setError('Recording produced empty file');\n          }\n        } else {\n          setError('No audio data captured');\n        }\n        audioChunksRef.current = [];\n      };\n      mediaRecorder.onerror = event => {\n        var _event$error;\n        console.error('MediaRecorder error:', event);\n        setError('Recording error: ' + (((_event$error = event.error) === null || _event$error === void 0 ? void 0 : _event$error.message) || 'Unknown error'));\n        cleanup();\n      };\n      mediaRecorder.onstart = () => {\n        console.log('MediaRecorder started successfully');\n        setIsRecording(true);\n        drawWaveform();\n      };\n\n      // Start recording with small time slices for better data collection\n      mediaRecorder.start(250); // Collect data every 250ms\n\n      console.log('MediaRecorder start requested, state:', mediaRecorder.state);\n    } catch (err) {\n      console.error(\"Recording startup error:\", err);\n      setError(`Failed to start recording: ${err.message}`);\n      cleanup();\n    }\n  };\n  const stopRecording = () => {\n    console.log('Stop recording requested');\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n      mediaRecorderRef.current.stop();\n      console.log('MediaRecorder stop called');\n    }\n\n    // Don't cleanup immediately, let onstop handle it\n    setIsRecording(false);\n\n    // Cleanup after a delay to ensure onstop fires\n    setTimeout(cleanup, 1000);\n  };\n\n  // Drag and drop functionality\n  const handleDragStart = (e, recording) => {\n    // Set the file for drag operation\n    e.dataTransfer.setData('DownloadURL', `${recording.file.type}:${recording.filename}:${recording.url}`);\n    e.dataTransfer.effectAllowed = 'copy';\n\n    // Create drag image\n    const dragImg = document.createElement('div');\n    dragImg.innerHTML = `🎤 ${recording.filename}`;\n    dragImg.style.padding = '8px';\n    dragImg.style.background = '#dcf8c6';\n    dragImg.style.border = '1px solid #25D366';\n    dragImg.style.borderRadius = '8px';\n    dragImg.style.position = 'absolute';\n    dragImg.style.top = '-1000px';\n    document.body.appendChild(dragImg);\n    e.dataTransfer.setDragImage(dragImg, 0, 0);\n    setTimeout(() => document.body.removeChild(dragImg), 0);\n  };\n  const downloadRecording = recording => {\n    recording.downloadLink.click();\n  };\n  const removeRecording = index => {\n    setRecordings(prev => {\n      const recording = prev[index];\n      URL.revokeObjectURL(recording.url);\n      if (recording.downloadLink) {\n        document.body.removeChild(recording.downloadLink);\n      }\n      return prev.filter((_, i) => i !== index);\n    });\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-[#ece5dd] min-h-screen p-4 space-y-4 max-w-4xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-[#075e54] text-white p-4 rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-semibold\",\n        children: \"\\uD83C\\uDFA4 WhatsApp Voice Recorder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm opacity-90\",\n        children: \"Record, drag & drop to WhatsApp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-3 rounded-lg shadow flex items-center justify-between\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm\",\n          children: [\"\\uD83C\\uDF99\\uFE0F \", permissionStatus === 'granted' ? '✅ Ready' : permissionStatus === 'denied' ? '❌ No Access' : '⏳ Checking...']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this), isRecording && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-600 font-medium animate-pulse\",\n          children: [\"\\uD83D\\uDD34 Recording \", recordingTime, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 13\n        }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-blue-600\",\n          children: \"\\u23F3 Processing...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-50 border-l-4 border-red-400 p-4 rounded\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-shrink-0\",\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-3\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-red-700\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setError(null),\n          className: \"ml-auto text-red-400 hover:text-red-600\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center space-x-4\",\n        children: !isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startRecording,\n          disabled: permissionStatus !== 'granted' || isProcessing,\n          className: `px-8 py-4 rounded-full text-lg font-medium shadow-lg transition-all transform hover:scale-105 ${permissionStatus !== 'granted' || isProcessing ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-[#25D366] hover:bg-[#128C7E] text-white'}`,\n          children: \"\\uD83C\\uDF99\\uFE0F Start Recording\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopRecording,\n          className: \"px-8 py-4 bg-red-500 hover:bg-red-600 text-white rounded-full text-lg font-medium shadow-lg transition-all transform hover:scale-105 relative\",\n          children: [\"\\u23F9\\uFE0F Stop Recording\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"absolute -top-2 -right-2 w-4 h-4 bg-red-400 rounded-full animate-ping\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 bg-gray-50 p-4 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          width: 600,\n          height: 100,\n          className: \"w-full border rounded bg-white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-sm text-gray-600 mt-2\",\n          children: [\"\\uD83C\\uDFB5 Audio Visualization \\u2022 \", recordingTime, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: recordings.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-8 rounded-lg shadow text-center text-gray-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-4xl mb-2\",\n          children: \"\\uD83C\\uDFA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No recordings yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: \"Your voice messages will appear here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-700\",\n          children: [\"\\uD83D\\uDCF1 Your Voice Messages (\", recordings.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this), recordings.map((rec, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          draggable: true,\n          onDragStart: e => handleDragStart(e, rec),\n          className: \"flex items-center space-x-4 bg-[#dcf8c6] p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow cursor-move border-l-4 border-[#25D366]\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://www.gravatar.com/avatar?d=mp\",\n            alt: \"Avatar\",\n            className: \"w-12 h-12 rounded-full flex-shrink-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 min-w-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n              controls: true,\n              src: rec.url,\n              className: \"w-full mb-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-600 flex justify-between items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u23F1\\uFE0F \", rec.duration, \"s \\u2022 \\uD83D\\uDCC5 \", rec.timestamp]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\uD83D\\uDCC1 \", formatFileSize(rec.size), \" \\u2022 \\uD83C\\uDFB5 .ogg\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: [\"\\uD83D\\uDCDD \", rec.filename]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col space-y-2 flex-shrink-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => downloadRecording(rec),\n              className: \"px-3 py-1 bg-[#25D366] hover:bg-[#128C7E] text-white rounded text-sm transition-colors\",\n              title: \"Download file\",\n              children: \"\\uD83D\\uDCBE Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeRecording(index),\n              className: \"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-sm transition-colors\",\n              title: \"Delete recording\",\n              children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl cursor-move\",\n            title: \"Drag to WhatsApp\",\n            children: \"\\u2197\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 17\n          }, this)]\n        }, rec.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 7\n    }, this), recordings.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-blue-50 border border-blue-200 p-4 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-medium text-blue-800 mb-2\",\n        children: \"\\uD83D\\uDCCB How to use:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"text-sm text-blue-700 space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"\\u2022 \\uD83D\\uDDB1\\uFE0F \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Drag & Drop:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 23\n          }, this), \" Drag the voice message directly to WhatsApp\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"\\u2022 \\uD83D\\uDCBE \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Download:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 22\n          }, this), \" Click \\\"Save\\\" to download the .ogg file\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"\\u2022 \\uD83D\\uDCF1 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Mobile:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 22\n          }, this), \" Downloaded files can be shared via WhatsApp\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"\\u2022 \\uD83C\\uDFB5 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Format:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 22\n          }, this), \" OGG/Opus - WhatsApp compatible\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 5\n  }, this);\n}\n_s(WhatsAppAudioRecorder, \"JpnO/NkHDn1GDlH2a63pgKtpGqk=\");\n_c = WhatsAppAudioRecorder;\nvar _c;\n$RefreshReg$(_c, \"WhatsAppAudioRecorder\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","jsxDEV","_jsxDEV","Fragment","_Fragment","WhatsAppAudioRecorder","_s","recordings","setRecordings","isRecording","setIsRecording","recordingTime","setRecordingTime","audioStream","setAudioStream","permissionStatus","setPermissionStatus","error","setError","isProcessing","setIsProcessing","mediaRecorderRef","audioChunksRef","timerRef","audioContextRef","analyserRef","dataArrayRef","animationRef","canvasRef","recordingStartTimeRef","requestPermissions","stream","navigator","mediaDevices","getUserMedia","audio","echoCancellation","noiseSuppression","autoGainControl","sampleRate","channelCount","getTracks","forEach","track","stop","err","console","message","cleanup","current","clearInterval","cancelAnimationFrame","state","close","e","warn","Date","now","setInterval","elapsed","Math","floor","drawWaveform","canvas","ctx","getContext","analyser","dataArray","draw","requestAnimationFrame","getByteFrequencyData","fillStyle","fillRect","width","height","barWidth","length","barHeight","x","i","gradient","createLinearGradient","addColorStop","createWhatsAppAudio","audioBlob","duration","timestamp","toISOString","replace","slice","filename","file","File","type","lastModified","url","URL","createObjectURL","downloadLink","document","createElement","href","download","style","display","body","appendChild","recording","id","blob","toLocaleTimeString","size","prev","startRecording","granted","audioCtx","window","AudioContext","webkitAudioContext","resume","source","createMediaStreamSource","createAnalyser","fftSize","smoothingTimeConstant","connect","bufferLength","frequencyBinCount","Uint8Array","mimeTypes","selectedMimeType","mimeType","MediaRecorder","isTypeSupported","Error","mediaRecorder","audioBitsPerSecond","ondataavailable","event","data","push","log","onstop","finalBlob","Blob","actualDuration","onerror","_event$error","onstart","start","stopRecording","setTimeout","handleDragStart","dataTransfer","setData","effectAllowed","dragImg","innerHTML","padding","background","border","borderRadius","position","top","setDragImage","removeChild","downloadRecording","click","removeRecording","index","revokeObjectURL","filter","_","formatFileSize","bytes","k","sizes","parseFloat","pow","toFixed","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","ref","map","rec","draggable","onDragStart","src","alt","controls","title","_c","$RefreshReg$"],"sources":["/home/maksim/src/react/wa-audio-sandbox-20/src/components/WhatsAppAudioRecorder.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from \"react\";\n\nexport default function WhatsAppAudioRecorder() {\n  const [recordings, setRecordings] = useState([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioStream, setAudioStream] = useState(null);\n  const [permissionStatus, setPermissionStatus] = useState('prompt');\n  const [error, setError] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  \n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const timerRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataArrayRef = useRef(null);\n  const animationRef = useRef(null);\n  const canvasRef = useRef(null);\n  const recordingStartTimeRef = useRef(null);\n\n  // Check and request microphone permissions\n  const requestPermissions = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000, // WhatsApp compatible\n          channelCount: 1, // Mono for smaller files\n        } \n      });\n      \n      setPermissionStatus('granted');\n      \n      // Stop the test stream immediately\n      stream.getTracks().forEach(track => track.stop());\n      \n      return true;\n    } catch (err) {\n      console.error('Permission error:', err);\n      setPermissionStatus('denied');\n      setError(`Microphone access denied: ${err.message}`);\n      return false;\n    }\n  };\n\n  useEffect(() => {\n    requestPermissions();\n  }, []);\n\n  // Cleanup function\n  const cleanup = useCallback(() => {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n    \n    if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n      animationRef.current = null;\n    }\n    \n    if (audioContextRef.current && audioContextRef.current.state !== 'closed') {\n      audioContextRef.current.close();\n      audioContextRef.current = null;\n    }\n    \n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {\n      try {\n        mediaRecorderRef.current.stop();\n      } catch (e) {\n        console.warn('MediaRecorder cleanup warning:', e);\n      }\n    }\n    \n    if (audioStream) {\n      audioStream.getTracks().forEach(track => track.stop());\n      setAudioStream(null);\n    }\n    \n    setIsRecording(false);\n    setRecordingTime(0);\n  }, [audioStream]);\n\n  useEffect(() => {\n    return cleanup;\n  }, [cleanup]);\n\n  // Timer for recording duration\n  useEffect(() => {\n    if (isRecording) {\n      recordingStartTimeRef.current = Date.now();\n      timerRef.current = setInterval(() => {\n        const elapsed = Math.floor((Date.now() - recordingStartTimeRef.current) / 1000);\n        setRecordingTime(elapsed);\n      }, 100);\n    } else {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    }\n    \n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [isRecording]);\n\n  // Waveform visualization\n  const drawWaveform = useCallback(() => {\n    if (!canvasRef.current || !analyserRef.current || !isRecording) return;\n    \n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const analyser = analyserRef.current;\n    const dataArray = dataArrayRef.current;\n\n    const draw = () => {\n      if (!isRecording) return;\n      \n      animationRef.current = requestAnimationFrame(draw);\n      analyser.getByteFrequencyData(dataArray);\n\n      ctx.fillStyle = \"#f0f0f0\";\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      \n      const barWidth = (canvas.width / dataArray.length) * 2.5;\n      let barHeight;\n      let x = 0;\n\n      for (let i = 0; i < dataArray.length; i++) {\n        barHeight = (dataArray[i] / 255) * canvas.height * 0.8;\n        \n        const gradient = ctx.createLinearGradient(0, canvas.height - barHeight, 0, canvas.height);\n        gradient.addColorStop(0, '#25D366');\n        gradient.addColorStop(1, '#128C7E');\n        \n        ctx.fillStyle = gradient;\n        ctx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);\n        \n        x += barWidth + 1;\n      }\n    };\n    \n    draw();\n  }, [isRecording]);\n\n  // Create WhatsApp-compatible audio file\n  const createWhatsAppAudio = async (audioBlob, duration) => {\n    try {\n      setIsProcessing(true);\n      \n      // Create filename with timestamp\n      const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);\n      const filename = `voice-${timestamp}.ogg`;\n      \n      // Create file object\n      const file = new File([audioBlob], filename, { \n        type: 'audio/ogg; codecs=opus',\n        lastModified: Date.now()\n      });\n      \n      // Create object URL for preview\n      const url = URL.createObjectURL(audioBlob);\n      \n      // Auto-download for drag & drop usage\n      const downloadLink = document.createElement('a');\n      downloadLink.href = url;\n      downloadLink.download = filename;\n      downloadLink.style.display = 'none';\n      document.body.appendChild(downloadLink);\n      \n      const recording = {\n        id: Date.now(),\n        url,\n        blob: audioBlob,\n        file,\n        filename,\n        duration,\n        timestamp: new Date().toLocaleTimeString(),\n        size: audioBlob.size,\n        downloadLink\n      };\n      \n      setRecordings(prev => [...prev, recording]);\n      setIsProcessing(false);\n      \n      return recording;\n    } catch (err) {\n      console.error('Audio processing error:', err);\n      setError('Failed to process audio: ' + err.message);\n      setIsProcessing(false);\n      return null;\n    }\n  };\n\n  const startRecording = async () => {\n    try {\n      setError(null);\n      cleanup();\n      \n      if (permissionStatus !== 'granted') {\n        const granted = await requestPermissions();\n        if (!granted) return;\n      }\n\n      // Get fresh audio stream with optimal settings for WhatsApp\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 48000,\n          channelCount: 1,\n        } \n      });\n      \n      setAudioStream(stream);\n\n      // Setup audio context for visualization\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n      await audioCtx.resume(); // Ensure audio context is running\n      \n      const source = audioCtx.createMediaStreamSource(stream);\n      const analyser = audioCtx.createAnalyser();\n      analyser.fftSize = 256;\n      analyser.smoothingTimeConstant = 0.8;\n      source.connect(analyser);\n      \n      const bufferLength = analyser.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n\n      audioContextRef.current = audioCtx;\n      analyserRef.current = analyser;\n      dataArrayRef.current = dataArray;\n\n      // Setup MediaRecorder with WhatsApp-compatible format\n      const mimeTypes = [\n        'audio/ogg; codecs=opus',\n        'audio/webm; codecs=opus',\n        'audio/ogg',\n        'audio/webm'\n      ];\n      \n      let selectedMimeType = null;\n      for (const mimeType of mimeTypes) {\n        if (MediaRecorder.isTypeSupported(mimeType)) {\n          selectedMimeType = mimeType;\n          break;\n        }\n      }\n      \n      if (!selectedMimeType) {\n        throw new Error('No supported audio format found');\n      }\n\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: selectedMimeType,\n        audioBitsPerSecond: 64000, // Good quality, WhatsApp compatible\n      });\n\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data && event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n          console.log('Data chunk received:', event.data.size, 'bytes');\n        }\n      };\n\n      mediaRecorder.onstop = async () => {\n        console.log('MediaRecorder stopped, chunks:', audioChunksRef.current.length);\n        \n        if (audioChunksRef.current.length > 0) {\n          const finalBlob = new Blob(audioChunksRef.current, { \n            type: selectedMimeType \n          });\n          \n          console.log('Final blob size:', finalBlob.size, 'bytes');\n          \n          if (finalBlob.size > 0) {\n            const actualDuration = recordingTime > 0 ? recordingTime : 1;\n            await createWhatsAppAudio(finalBlob, actualDuration);\n          } else {\n            setError('Recording produced empty file');\n          }\n        } else {\n          setError('No audio data captured');\n        }\n        \n        audioChunksRef.current = [];\n      };\n\n      mediaRecorder.onerror = (event) => {\n        console.error('MediaRecorder error:', event);\n        setError('Recording error: ' + (event.error?.message || 'Unknown error'));\n        cleanup();\n      };\n\n      mediaRecorder.onstart = () => {\n        console.log('MediaRecorder started successfully');\n        setIsRecording(true);\n        drawWaveform();\n      };\n\n      // Start recording with small time slices for better data collection\n      mediaRecorder.start(250); // Collect data every 250ms\n      \n      console.log('MediaRecorder start requested, state:', mediaRecorder.state);\n\n    } catch (err) {\n      console.error(\"Recording startup error:\", err);\n      setError(`Failed to start recording: ${err.message}`);\n      cleanup();\n    }\n  };\n\n  const stopRecording = () => {\n    console.log('Stop recording requested');\n    \n    if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n      mediaRecorderRef.current.stop();\n      console.log('MediaRecorder stop called');\n    }\n    \n    // Don't cleanup immediately, let onstop handle it\n    setIsRecording(false);\n    \n    // Cleanup after a delay to ensure onstop fires\n    setTimeout(cleanup, 1000);\n  };\n\n  // Drag and drop functionality\n  const handleDragStart = (e, recording) => {\n    // Set the file for drag operation\n    e.dataTransfer.setData('DownloadURL', `${recording.file.type}:${recording.filename}:${recording.url}`);\n    e.dataTransfer.effectAllowed = 'copy';\n    \n    // Create drag image\n    const dragImg = document.createElement('div');\n    dragImg.innerHTML = `🎤 ${recording.filename}`;\n    dragImg.style.padding = '8px';\n    dragImg.style.background = '#dcf8c6';\n    dragImg.style.border = '1px solid #25D366';\n    dragImg.style.borderRadius = '8px';\n    dragImg.style.position = 'absolute';\n    dragImg.style.top = '-1000px';\n    document.body.appendChild(dragImg);\n    \n    e.dataTransfer.setDragImage(dragImg, 0, 0);\n    \n    setTimeout(() => document.body.removeChild(dragImg), 0);\n  };\n\n  const downloadRecording = (recording) => {\n    recording.downloadLink.click();\n  };\n\n  const removeRecording = (index) => {\n    setRecordings(prev => {\n      const recording = prev[index];\n      URL.revokeObjectURL(recording.url);\n      if (recording.downloadLink) {\n        document.body.removeChild(recording.downloadLink);\n      }\n      return prev.filter((_, i) => i !== index);\n    });\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"bg-[#ece5dd] min-h-screen p-4 space-y-4 max-w-4xl mx-auto\">\n      {/* Header */}\n      <div className=\"bg-[#075e54] text-white p-4 rounded-lg shadow-lg\">\n        <h1 className=\"text-xl font-semibold\">🎤 WhatsApp Voice Recorder</h1>\n        <p className=\"text-sm opacity-90\">Record, drag & drop to WhatsApp</p>\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"bg-white p-3 rounded-lg shadow flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <span className=\"text-sm\">\n            🎙️ {permissionStatus === 'granted' ? '✅ Ready' : \n                 permissionStatus === 'denied' ? '❌ No Access' : '⏳ Checking...'}\n          </span>\n          {isRecording && (\n            <span className=\"text-red-600 font-medium animate-pulse\">\n              🔴 Recording {recordingTime}s\n            </span>\n          )}\n          {isProcessing && (\n            <span className=\"text-blue-600\">⏳ Processing...</span>\n          )}\n        </div>\n      </div>\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"bg-red-50 border-l-4 border-red-400 p-4 rounded\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">❌</div>\n            <div className=\"ml-3\">\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n            <button \n              onClick={() => setError(null)}\n              className=\"ml-auto text-red-400 hover:text-red-600\"\n            >\n              ×\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Recording Controls */}\n      <div className=\"bg-white p-6 rounded-lg shadow-lg\">\n        <div className=\"flex items-center justify-center space-x-4\">\n          {!isRecording ? (\n            <button\n              onClick={startRecording}\n              disabled={permissionStatus !== 'granted' || isProcessing}\n              className={`px-8 py-4 rounded-full text-lg font-medium shadow-lg transition-all transform hover:scale-105 ${\n                permissionStatus !== 'granted' || isProcessing\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                  : 'bg-[#25D366] hover:bg-[#128C7E] text-white'\n              }`}\n            >\n              🎙️ Start Recording\n            </button>\n          ) : (\n            <button\n              onClick={stopRecording}\n              className=\"px-8 py-4 bg-red-500 hover:bg-red-600 text-white rounded-full text-lg font-medium shadow-lg transition-all transform hover:scale-105 relative\"\n            >\n              ⏹️ Stop Recording\n              <span className=\"absolute -top-2 -right-2 w-4 h-4 bg-red-400 rounded-full animate-ping\" />\n            </button>\n          )}\n        </div>\n\n        {/* Waveform */}\n        {isRecording && (\n          <div className=\"mt-6 bg-gray-50 p-4 rounded-lg\">\n            <canvas\n              ref={canvasRef}\n              width={600}\n              height={100}\n              className=\"w-full border rounded bg-white\"\n            />\n            <div className=\"text-center text-sm text-gray-600 mt-2\">\n              🎵 Audio Visualization • {recordingTime}s\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Recordings */}\n      <div className=\"space-y-3\">\n        {recordings.length === 0 ? (\n          <div className=\"bg-white p-8 rounded-lg shadow text-center text-gray-500\">\n            <div className=\"text-4xl mb-2\">🎤</div>\n            <p>No recordings yet</p>\n            <p className=\"text-sm\">Your voice messages will appear here</p>\n          </div>\n        ) : (\n          <>\n            <h2 className=\"text-lg font-semibold text-gray-700\">\n              📱 Your Voice Messages ({recordings.length})\n            </h2>\n            {recordings.map((rec, index) => (\n              <div\n                key={rec.id}\n                draggable\n                onDragStart={(e) => handleDragStart(e, rec)}\n                className=\"flex items-center space-x-4 bg-[#dcf8c6] p-4 rounded-xl shadow-md hover:shadow-lg transition-shadow cursor-move border-l-4 border-[#25D366]\"\n              >\n                <img\n                  src=\"https://www.gravatar.com/avatar?d=mp\"\n                  alt=\"Avatar\"\n                  className=\"w-12 h-12 rounded-full flex-shrink-0\"\n                />\n                \n                <div className=\"flex-1 min-w-0\">\n                  <audio controls src={rec.url} className=\"w-full mb-2\" />\n                  <div className=\"text-xs text-gray-600 flex justify-between items-center\">\n                    <span>⏱️ {rec.duration}s • 📅 {rec.timestamp}</span>\n                    <span>📁 {formatFileSize(rec.size)} • 🎵 .ogg</span>\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    📝 {rec.filename}\n                  </div>\n                </div>\n\n                <div className=\"flex flex-col space-y-2 flex-shrink-0\">\n                  <button\n                    onClick={() => downloadRecording(rec)}\n                    className=\"px-3 py-1 bg-[#25D366] hover:bg-[#128C7E] text-white rounded text-sm transition-colors\"\n                    title=\"Download file\"\n                  >\n                    💾 Save\n                  </button>\n                  <button\n                    onClick={() => removeRecording(index)}\n                    className=\"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-sm transition-colors\"\n                    title=\"Delete recording\"\n                  >\n                    🗑️ Delete\n                  </button>\n                </div>\n                \n                <div className=\"text-2xl cursor-move\" title=\"Drag to WhatsApp\">\n                  ↗️\n                </div>\n              </div>\n            ))}\n          </>\n        )}\n      </div>\n\n      {/* Instructions */}\n      {recordings.length > 0 && (\n        <div className=\"bg-blue-50 border border-blue-200 p-4 rounded-lg\">\n          <h3 className=\"font-medium text-blue-800 mb-2\">📋 How to use:</h3>\n          <ul className=\"text-sm text-blue-700 space-y-1\">\n            <li>• 🖱️ <strong>Drag & Drop:</strong> Drag the voice message directly to WhatsApp</li>\n            <li>• 💾 <strong>Download:</strong> Click \"Save\" to download the .ogg file</li>\n            <li>• 📱 <strong>Mobile:</strong> Downloaded files can be shared via WhatsApp</li>\n            <li>• 🎵 <strong>Format:</strong> OGG/Opus - WhatsApp compatible</li>\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}